<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POS Station Creation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header p {
            opacity: 0.9;
            font-size: 1.1rem;
        }

        .form-container {
            padding: 40px;
        }

        .step {
            margin-bottom: 40px;
            opacity: 0;
            transform: translateY(20px);
            animation: slideIn 0.6s ease forwards;
        }

        @keyframes slideIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .step-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .step-number {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
        }

        .step-title {
            font-size: 1.5rem;
            color: #333;
            font-weight: 600;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #555;
        }

        select, input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        select:focus, input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .option-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .option-card {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .option-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .option-card.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .option-card h3 {
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .option-card p {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .hidden {
            display: none;
        }

        .preview {
            background: linear-gradient(135deg, #4facfe, #00f2fe);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-top: 30px;
        }

        .preview h3 {
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        .preview-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .preview-item:last-child {
            border-bottom: none;
        }

        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 12px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        /* Toggle Switch Styles */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        .toggle-switch input:checked + .toggle-slider {
            background-color: #4CAF50;
        }

        .toggle-switch input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }

        .toggle-container {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 10px;
        }

        .toggle-label {
            font-weight: 500;
            color: #555;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>POS Station Creator</h1>
            <p>Configure your point-of-sale station with custom settings</p>
        </div>

        <div class="form-container">
            <!-- Step 1: App Type Selection -->
            <div class="step" id="step1">
                <div class="step-header">
                    <div class="step-number">1</div>
                    <div class="step-title">Select Application Type</div>
                </div>

                <div class="option-grid">
                    <div class="option-card" onclick="selectAppType('lite')">
                        <h3>Lite</h3>
                    </div>
                    <div class="option-card" onclick="selectAppType('pos')">
                        <h3>POS</h3>
                    </div>
                    <div class="option-card" onclick="selectAppType('qst')">
                        <h3>QST</h3>
                    </div>
                    <div class="option-card" onclick="selectAppType('card-not-present')">
                        <h3>Card Not Present</h3>
                    </div>
                </div>
            </div>

            <!-- Step 2: Payment Gateway Selection -->
            <div class="step hidden" id="step2">
                <div class="step-header">
                    <div class="step-number">2</div>
                    <div class="step-title">Choose Payment Gateway</div>
                </div>

                <div class="form-group">
                    <label for="paymentGateway">Payment Gateway Provider</label>
                    <select id="paymentGateway" onchange="selectPaymentGateway()">
                        <option value="">Select a payment gateway...</option>
                    </select>
                </div>
            </div>

            <!-- Step 3: Device Selection -->
            <div class="step hidden" id="step3">
                <div class="step-header">
                    <div class="step-number">3</div>
                    <div class="step-title">Select Device</div>
                </div>

                <div class="form-group">
                    <label for="deviceSelect">Available Devices</label>
                    <select id="deviceSelect" onchange="selectDevice()">
                        <option value="">Select a device...</option>
                    </select>
                </div>
            </div>

            <!-- Step 4: Gateway-specific Settings -->
            <div class="step hidden" id="step4">
                <div class="step-header">
                    <div class="step-number">4</div>
                    <div class="step-title">Gateway Specific Settings</div>
                </div>

                <div id="gatewaySpecificConfig"></div>
            </div>

            <!-- Step 5: Standard Gateway Configuration -->
            <div class="step hidden" id="step5">
                <div class="step-header">
                    <div class="step-number">5</div>
                    <div class="step-title">Configure Gateway Settings</div>
                </div>

                <div id="gatewayConfig"></div>
            </div>

            <!-- Step 6: Final Configuration -->
            <div class="step hidden" id="step6">
                <div class="step-header">
                    <div class="step-number">6</div>
                    <div class="step-title">Station Details</div>
                </div>

                <div class="form-group">
                    <label for="stationName">Station Name</label>
                    <input type="text" id="stationName" placeholder="Enter station name" oninput="updatePreview()">
                </div>

                <div class="form-group">
                    <label for="location">Location</label>
                    <input type="text" id="location" placeholder="Enter location" oninput="updatePreview()">
                </div>

                <div class="preview" id="configPreview">
                    <h3>Configuration Preview</h3>
                    <div id="previewContent"></div>
                </div>

                <button class="btn" onclick="createStation()" style="margin-top: 20px;">Create Station</button>
            </div>
        </div>
    </div>

    <script>
        let config = {
            appType: '',
            paymentGateway: '',
            device: '',
            gatewaySettings: {},
            features: [],
            stationName: '',
            location: ''
        };

        function selectAppType(type) {
            config.appType = type;
            
            // Reset all subsequent configuration
            resetSubsequentSteps();
            
            // Update UI
            document.querySelectorAll('.option-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.target.closest('.option-card').classList.add('selected');
            
            // Populate payment gateway options based on app type
            populatePaymentGateways(type);
            
            // Show next step
            setTimeout(() => {
                document.getElementById('step2').classList.remove('hidden');
            }, 300);
        }

        function resetSubsequentSteps() {
            // Reset config object
            config.paymentGateway = '';
            config.device = '';
            config.gatewaySettings = {};
            config.stationName = '';
            config.location = '';
            
            // Hide all subsequent steps
            document.getElementById('step3').classList.add('hidden');
            document.getElementById('step4').classList.add('hidden');
            document.getElementById('step5').classList.add('hidden');
            document.getElementById('step6').classList.add('hidden');
            
            // Clear form fields
            const paymentGatewaySelect = document.getElementById('paymentGateway');
            if (paymentGatewaySelect) {
                paymentGatewaySelect.value = '';
            }
            
            const deviceSelect = document.getElementById('deviceSelect');
            if (deviceSelect) {
                deviceSelect.value = '';
                deviceSelect.innerHTML = '<option value="">Select a device...</option>';
            }
            
            // Clear gateway specific config
            const gatewaySpecificConfig = document.getElementById('gatewaySpecificConfig');
            if (gatewaySpecificConfig) {
                gatewaySpecificConfig.innerHTML = '';
            }
            
            // Clear standard gateway config
            const gatewayConfig = document.getElementById('gatewayConfig');
            if (gatewayConfig) {
                gatewayConfig.innerHTML = '';
            }
            
            // Clear station details
            const stationName = document.getElementById('stationName');
            if (stationName) {
                stationName.value = '';
            }
            
            const location = document.getElementById('location');
            if (location) {
                location.value = '';
            }
            
            // Clear preview
            const previewContent = document.getElementById('previewContent');
            if (previewContent) {
                previewContent.innerHTML = '';
            }
        }

        function populatePaymentGateways(appType) {
            const gatewaySelect = document.getElementById('paymentGateway');
            
            // Clear existing options
            gatewaySelect.innerHTML = '<option value="">Select a payment gateway...</option>';
            
            let gateways = [];
            
            if (appType === 'card-not-present') {
                gateways = [
                    { value: 'authnet', name: 'Auth.net' },
                    { value: 'tsys-transit', name: 'TSYS TransIT' },
                    { value: 'quest', name: 'Quest' },
                    { value: 'dejavoo', name: 'Dejavoo' },
                    { value: 'payroc', name: 'Payroc' },
                    { value: 'cardconnect', name: 'CardConnect' }
                ];
            } else if (appType === 'qst') {
                gateways = [
                    { value: 'pax-qst-lite-apio', name: 'PAX (QST/LITE/APIO)' }
                ];
            } else {
                // Gateways for Lite and POS (removed TSYS and Auth.net)
                gateways = [
                    { value: 'cardconnect', name: 'CardConnect' },
                    { value: 'elavon', name: 'Elavon' },
                    { value: 'payroc', name: 'Payroc' },
                    { value: 'pax-qst-lite-apio', name: 'PAX (QST/LITE/APIO)' },
                    { value: 'pax-direct-pos', name: 'PAX Direct (POS)' },
                    { value: 'amp', name: 'AMP' },
                    { value: 'magensa', name: 'Magensa' },
                    { value: 'payroc-gateway', name: 'Payroc Gateway' },
                    { value: 'dx8000', name: 'DX8000' },
                    { value: 'bbpos', name: 'BBPOS' },
                    { value: 'quest', name: 'Quest' },
                    { value: 'payroc-gateway-uat', name: 'Payroc Gateway (UAT)' },
                    { value: 'dx8000-uat', name: 'DX8000 (UAT)' },
                    { value: 'bbpos-uat', name: 'BB POS (UAT)' },
                    { value: 'pax-uk-pa', name: 'PAX UK PA' },
                    { value: 'paidyet', name: 'PaidYET' },
                    { value: 'dejavoo', name: 'Dejavoo' }
                ];
            }
            
            gateways.forEach(gateway => {
                const option = document.createElement('option');
                option.value = gateway.value;
                option.textContent = gateway.name;
                gatewaySelect.appendChild(option);
            });
        }

        function selectPaymentGateway() {
            const gateway = document.getElementById('paymentGateway').value;
            config.paymentGateway = gateway;
            
            // Reset all subsequent steps when gateway changes
            resetFromDeviceSelection();
            
            if (gateway) {
                // For Card Not Present, DX8000, and BBPOS, skip device selection and go directly to gateway specific settings
                if (config.appType === 'card-not-present' || gateway === 'dx8000' || gateway === 'dx8000-uat' || gateway === 'bbpos' || gateway === 'bbpos-uat') {
                    if (config.appType === 'card-not-present') {
                        config.device = 'card-not-present';
                    } else if (gateway === 'dx8000' || gateway === 'dx8000-uat') {
                        config.device = 'dx8000';
                    } else if (gateway === 'bbpos' || gateway === 'bbpos-uat') {
                        config.device = 'bbpos';
                    }
                    showGatewaySpecificSettings();
                    setTimeout(() => {
                        document.getElementById('step4').classList.remove('hidden');
                    }, 300);
                } else {
                    showDeviceOptions(gateway);
                    setTimeout(() => {
                        document.getElementById('step3').classList.remove('hidden');
                    }, 300);
                }
            }
        }

        function resetFromDeviceSelection() {
            // Reset config values
            config.device = '';
            config.gatewaySettings = {};
            config.stationName = '';
            config.location = '';
            
            // Hide subsequent steps
            document.getElementById('step3').classList.add('hidden');
            document.getElementById('step4').classList.add('hidden');
            document.getElementById('step5').classList.add('hidden');
            document.getElementById('step6').classList.add('hidden');
            
            // Clear device selection
            const deviceSelect = document.getElementById('deviceSelect');
            if (deviceSelect) {
                deviceSelect.value = '';
                deviceSelect.innerHTML = '<option value="">Select a device...</option>';
            }
            
            // Clear gateway specific config
            const gatewaySpecificConfig = document.getElementById('gatewaySpecificConfig');
            if (gatewaySpecificConfig) {
                gatewaySpecificConfig.innerHTML = '';
            }
            
            // Clear standard gateway config
            const gatewayConfig = document.getElementById('gatewayConfig');
            if (gatewayConfig) {
                gatewayConfig.innerHTML = '';
            }
            
            // Clear station details
            const stationName = document.getElementById('stationName');
            if (stationName) {
                stationName.value = '';
            }
            
            const location = document.getElementById('location');
            if (location) {
                location.value = '';
            }
            
            // Clear preview
            const previewContent = document.getElementById('previewContent');
            if (previewContent) {
                previewContent.innerHTML = '';
            }
        }

        function showDeviceOptions(gateway) {
            const deviceSelect = document.getElementById('deviceSelect');
            const devices = getGatewayDevices(gateway);
            
            // Clear existing options
            deviceSelect.innerHTML = '<option value="">Select a device...</option>';
            
            // Add gateway-specific devices
            devices.forEach(device => {
                const option = document.createElement('option');
                option.value = device.value;
                option.textContent = device.name;
                deviceSelect.appendChild(option);
            });
        }

        function getGatewayDevices(gateway) {
            const deviceMap = {
                'dejavoo': [
                    { value: 'P1', name: 'Dejavoo P1' },
                    { value: 'P8', name: 'Dejavoo P8' }
                ],
                'cardconnect': [
                    { value: 'Lane 3600', name: 'Lane 3600' }
                ],
                'heartland': [
                    { value: 'lane 3600', name: 'Lane 3600' }
                ],
                'elavon': [
                    { value: 'a920pro', name: 'PAX A920pro' },
                    { value: 'a77', name: 'PAX A77' },
                    { value: 'a35', name: 'PAX A35' },
                    { value: 'a80', name: 'PAX A80' },
                    { value: 'A800', name: 'PAX A800' }
                ],
                'payroc': [
                    { value: 'Z6', name: 'Dejavoo Z6' },
                    { value: 'Z9', name: 'Dejavoo Z9' }
                ],
                'payroc-gateway': [
                    { value: 'Z6', name: 'Dejavoo Z6' },
                    { value: 'Z9', name: 'Dejavoo Z9' }
                ],
                'payroc-gateway-uat': [
                    { value: 'Z6', name: 'Dejavoo Z6' },
                    { value: 'Z9', name: 'Dejavoo Z9' }
                ],
                'amp': [
                    { value: 'AMP8200', name: 'AMP 8200' }
                ],
                'magensa': [
                    { value: 'Idynamo6', name: 'Idynamo6' }
                ],
                'quest': [
                    { value: 'a920pro', name: 'PAX A920pro' },
                    { value: 'a35', name: 'PAX A35' },
                    { value: 'Z6', name: 'Dejavoo Z6' },
                    { value: 'Z8', name: 'Dejavoo Z8' }
                ],
                'pax-uk-pa': [
                    { value: 'a920pro', name: 'PAX A920pro' },
                    { value: 'A800', name: 'PAX A800' },
                    { value: 'a80', name: 'PAX A80' }
                ],
                'paidyet': [
                    { value: 'a920pro', name: 'PAX A920pro' },
                    { value: 'A800', name: 'PAX A800' }
                ],
                'pax-qst-lite-apio': [
                    { value: 'a920pro', name: 'PAX A920pro' },
                    { value: 'a77', name: 'PAX A77' },
                    { value: 'a35', name: 'PAX A35' },
                    { value: 'a80', name: 'PAX A80' },
                    { value: 'A800', name: 'PAX A800' }
                ],
                'pax-direct-pos': [
                    { value: 'a920pro', name: 'PAX A920pro' },
                    { value: 'a77', name: 'PAX A77' },
                    { value: 'a35', name: 'PAX A35' },
                    { value: 'a80', name: 'PAX A80' },
                    { value: 'A800', name: 'PAX A800' }
                ],
                'bbpos': [
                    { value: 'bbpos', name: 'BBPOS' }
                ],
                'tsys': [
                    { value: 'PAX Devices', name: 'PAX Devices' }
                ]
            };

            return deviceMap[gateway] || [
                { value: 'generic-terminal', name: 'Generic Terminal' },
                { value: 'integrated-pos', name: 'Integrated POS' }
            ];
        }

        function selectDevice() {
            const device = document.getElementById('deviceSelect').value;
            config.device = device;
            
            // Reset all subsequent steps when device changes
            resetFromGatewaySettings();
            
            if (device) {
                showGatewaySpecificSettings();
                setTimeout(() => {
                    document.getElementById('step4').classList.remove('hidden');
                }, 300);
            }
        }

        function resetFromGatewaySettings() {
            // Reset config values
            config.gatewaySettings = {};
            config.stationName = '';
            config.location = '';
            
            // Hide subsequent steps
            document.getElementById('step4').classList.add('hidden');
            document.getElementById('step5').classList.add('hidden');
            document.getElementById('step6').classList.add('hidden');
            
            // Clear gateway specific config
            const gatewaySpecificConfig = document.getElementById('gatewaySpecificConfig');
            if (gatewaySpecificConfig) {
                gatewaySpecificConfig.innerHTML = '';
            }
            
            // Clear standard gateway config
            const gatewayConfig = document.getElementById('gatewayConfig');
            if (gatewayConfig) {
                gatewayConfig.innerHTML = '';
            }
            
            // Clear station details
            const stationName = document.getElementById('stationName');
            if (stationName) {
                stationName.value = '';
            }
            
            const location = document.getElementById('location');
            if (location) {
                location.value = '';
            }
            
            // Clear preview
            const previewContent = document.getElementById('previewContent');
            if (previewContent) {
                previewContent.innerHTML = '';
            }
        }

        function getGatewayDisplayName(gateway) {
            const displayNames = {
                'dejavoo': 'Dejavoo',
                'cardconnect': 'CardConnect',
                'heartland': 'Heartland',
                'elavon': 'Elavon',
                'payroc': 'Payroc',
                'nmi': 'NMI',
                'pax-qst-lite-apio': 'PAX (QST/LITE/APIO)',
                'tsys': 'TSYS',
                'tsys-transit': 'TSYS TransIT',
                'authnet': 'Auth.net',
                'pax-direct-pos': 'PAX Direct (POS)',
                'amp': 'AMP',
                'magensa': 'Magensa',
                'payroc-gateway': 'Payroc Gateway',
                'dx8000': 'DX8000',
                'bbpos': 'BBPOS',
                'quest': 'Quest',
                'payroc-gateway-uat': 'Payroc Gateway (UAT)',
                'dx8000-uat': 'DX8000 (UAT)',
                'bbpos-uat': 'BB POS (UAT)',
                'pax-uk-pa': 'PAX UK PA',
                'paidyet': 'PaidYET'
            };
            return displayNames[gateway] || gateway;
        }

        function showGatewaySpecificSettings() {
            const configDiv = document.getElementById('gatewaySpecificConfig');
            const gateway = config.paymentGateway;
            const appType = config.appType;
            
            const specificFields = getGatewaySpecificFieldsByAppType(gateway, appType);
            
            if (specificFields) {
                configDiv.innerHTML = `
                    <div style="margin-bottom: 20px;">
                        <h4 style="color: #667eea; margin-bottom: 20px; font-size: 1.2rem;">${getGatewayDisplayName(gateway)} Settings for ${appType.replace('-', ' ').toUpperCase()}</h4>
                        ${specificFields}
                    </div>
                `;
            } else {
                // If no specific fields, skip to standard gateway config
                showStandardGatewayConfig();
                setTimeout(() => {
                    document.getElementById('step5').classList.remove('hidden');
                }, 300);
                return;
            }
        }

        function getGatewaySpecificFieldsByAppType(gateway, appType) {
            const gatewayConfigs = {
                'cardconnect': {
                    'pos': `
                        <div class="form-group">
                            <label for="manufacturer">Manufacturer</label>
                            <input type="text" id="manufacturer" placeholder="Enter Manufacturer" oninput="updateGatewaySpecificSetting('manufacturer', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="model">Model</label>
                            <input type="text" id="model" placeholder="Enter Model" oninput="updateGatewaySpecificSetting('model', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="username">Username</label>
                            <input type="text" id="username" placeholder="Enter Username" oninput="updateGatewaySpecificSetting('username', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="password">Password</label>
                            <input type="password" id="password" placeholder="Enter Password" oninput="updateGatewaySpecificSetting('password', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="serialNumbers">Serial Numbers</label>
                            <input type="text" id="serialNumbers" placeholder="Enter Serial Numbers" oninput="updateGatewaySpecificSetting('serialNumbers', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="merchantId">Merchant ID</label>
                            <input type="text" id="merchantId" placeholder="Enter Merchant ID" oninput="updateGatewaySpecificSetting('merchantId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="url">URL</label>
                            <select id="url" onchange="updateGatewaySpecificSetting('url', this.value); checkAllFieldsFilled();">
                                <option value="">Select URL type...</option>
                                <option value="legacy">Legacy (fts.xxx)</option>
                                <option value="new">New (Metis.xxx)</option>
                            </select>
                        </div>
                    `,
                    'card-not-present': `
                        <div class="form-group">
                            <label for="username">Username</label>
                            <input type="text" id="username" placeholder="Enter Username" oninput="updateGatewaySpecificSetting('username', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="merchantId">Merchant ID</label>
                            <input type="text" id="merchantId" placeholder="Enter Merchant ID" oninput="updateGatewaySpecificSetting('merchantId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="password">Password</label>
                            <input type="password" id="password" placeholder="Enter Password" oninput="updateGatewaySpecificSetting('password', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="url">URL</label>
                            <select id="url" onchange="updateGatewaySpecificSetting('url', this.value); checkAllFieldsFilled();">
                                <option value="">Select URL type...</option>
                                <option value="legacy">Legacy (fts.xxx)</option>
                                <option value="new">New (Metis.xxx)</option>
                            </select>
                        </div>
                    `
                },
                'paidyet': {
                    'lite': `
                        <div class="form-group">
                            <label for="serialNumber">Serial Number</label>
                            <input type="text" id="serialNumber" placeholder="Enter Serial Number" oninput="updateGatewaySpecificSetting('serialNumber', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="merchantId">Merchant ID</label>
                            <input type="text" id="merchantId" placeholder="Enter Merchant ID" oninput="updateGatewaySpecificSetting('merchantId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="secretKey">Secret Key</label>
                            <input type="text" id="secretKey" placeholder="Enter Secret Key" oninput="updateGatewaySpecificSetting('secretKey', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                    `,
                    'pos': `
                        <div class="form-group">
                            <label for="serialNumber">Serial Number</label>
                            <input type="text" id="serialNumber" placeholder="Enter Serial Number" oninput="updateGatewaySpecificSetting('serialNumber', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="merchantId">Merchant ID</label>
                            <input type="text" id="merchantId" placeholder="Enter Merchant ID" oninput="updateGatewaySpecificSetting('merchantId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="secretKey">Secret Key</label>
                            <input type="text" id="secretKey" placeholder="Enter Secret Key" oninput="updateGatewaySpecificSetting('secretKey', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                    `
                },
                'pax-uk-pa': {
                    'lite': `
                        <div class="form-group">
                            <label for="serialNumber">Serial Number</label>
                            <input type="text" id="serialNumber" placeholder="Enter Serial Number" oninput="updateGatewaySpecificSetting('serialNumber', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                    `,
                    'pos': `
                        <div class="form-group">
                            <label for="serialNumber">Serial Number</label>
                            <input type="text" id="serialNumber" placeholder="Enter Serial Number" oninput="updateGatewaySpecificSetting('serialNumber', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                    `
                },
                'quest': {
                    'lite': `
                        <div class="form-group">
                            <label for="serialNumber">Serial Number</label>
                            <input type="text" id="serialNumber" placeholder="Enter Serial Number" oninput="updateGatewaySpecificSetting('serialNumber', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="clientKey">Client Key</label>
                            <input type="text" id="clientKey" placeholder="Enter Client Key" oninput="updateGatewaySpecificSetting('clientKey', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label>Optional Features</label>
                            <div style="margin-top: 15px; display: grid; grid-template-columns: 1fr; gap: 10px;">
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updateQuestFeature('externalTipDisplay', this.checked)" style="margin-right: 10px;">
                                    External Tip Display
                                </label>
                            </div>
                        </div>
                    `,
                    'pos': `
                        <div class="form-group">
                            <label for="serialNumber">Serial Number</label>
                            <input type="text" id="serialNumber" placeholder="Enter Serial Number" oninput="updateGatewaySpecificSetting('serialNumber', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="clientKey">Client Key</label>
                            <input type="text" id="clientKey" placeholder="Enter Client Key" oninput="updateGatewaySpecificSetting('clientKey', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label>Optional Features</label>
                            <div style="margin-top: 15px; display: grid; grid-template-columns: 1fr; gap: 10px;">
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updateQuestFeature('externalTipDisplay', this.checked)" style="margin-right: 10px;">
                                    External Tip Display
                                </label>
                            </div>
                        </div>
                    `,
                    'card-not-present': `
                        <div class="form-group">
                            <label for="publicKey">Public Key</label>
                            <input type="text" id="publicKey" placeholder="Enter Public Key" oninput="updateGatewaySpecificSetting('publicKey', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="secretKey">Secret Key</label>
                            <input type="text" id="secretKey" placeholder="Enter Secret Key" oninput="updateGatewaySpecificSetting('secretKey', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                    `
                },
                'bbpos': {
                    'lite': `
                        <div class="form-group">
                            <label for="terminalId">Terminal ID</label>
                            <input type="text" id="terminalId" placeholder="Enter Terminal ID" oninput="updateGatewaySpecificSetting('terminalId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                    `,
                    'pos': `
                        <div class="form-group">
                            <label for="terminalId">Terminal ID</label>
                            <input type="text" id="terminalId" placeholder="Enter Terminal ID" oninput="updateGatewaySpecificSetting('terminalId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                    `
                },
                'bbpos-uat': {
                    'lite': `
                        <div class="form-group">
                            <label for="terminalId">Terminal ID</label>
                            <input type="text" id="terminalId" placeholder="Enter Terminal ID" oninput="updateGatewaySpecificSetting('terminalId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                    `,
                    'pos': `
                        <div class="form-group">
                            <label for="terminalId">Terminal ID</label>
                            <input type="text" id="terminalId" placeholder="Enter Terminal ID" oninput="updateGatewaySpecificSetting('terminalId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                    `
                },
                'dx8000': {
                    'lite': `
                        <div class="form-group">
                            <label for="apiKey">API Key</label>
                            <input type="text" id="apiKey" placeholder="Enter API Key" oninput="updateGatewaySpecificSetting('apiKey', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="terminalId">Terminal ID</label>
                            <input type="text" id="terminalId" placeholder="Enter Terminal ID" oninput="updateGatewaySpecificSetting('terminalId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="serialNumber">Serial Number</label>
                            <input type="text" id="serialNumber" placeholder="Enter Serial Number" oninput="updateGatewaySpecificSetting('serialNumber', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                    `,
                    'pos': `
                        <div class="form-group">
                            <label for="apiKey">API Key</label>
                            <input type="text" id="apiKey" placeholder="Enter API Key" oninput="updateGatewaySpecificSetting('apiKey', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="terminalId">Terminal ID</label>
                            <input type="text" id="terminalId" placeholder="Enter Terminal ID" oninput="updateGatewaySpecificSetting('terminalId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="serialNumber">Serial Number</label>
                            <input type="text" id="serialNumber" placeholder="Enter Serial Number" oninput="updateGatewaySpecificSetting('serialNumber', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                    `
                },
                'dx8000-uat': {
                    'lite': `
                        <div class="form-group">
                            <label for="apiKey">API Key</label>
                            <input type="text" id="apiKey" placeholder="Enter API Key" oninput="updateGatewaySpecificSetting('apiKey', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="terminalId">Terminal ID</label>
                            <input type="text" id="terminalId" placeholder="Enter Terminal ID" oninput="updateGatewaySpecificSetting('terminalId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="serialNumber">Serial Number</label>
                            <input type="text" id="serialNumber" placeholder="Enter Serial Number" oninput="updateGatewaySpecificSetting('serialNumber', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                    `,
                    'pos': `
                        <div class="form-group">
                            <label for="apiKey">API Key</label>
                            <input type="text" id="apiKey" placeholder="Enter API Key" oninput="updateGatewaySpecificSetting('apiKey', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="terminalId">Terminal ID</label>
                            <input type="text" id="terminalId" placeholder="Enter Terminal ID" oninput="updateGatewaySpecificSetting('terminalId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="serialNumber">Serial Number</label>
                            <input type="text" id="serialNumber" placeholder="Enter Serial Number" oninput="updateGatewaySpecificSetting('serialNumber', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                    `
                },
                'magensa': {
                    'lite': `
                        <div class="form-group">
                            <label for="username">Username</label>
                            <input type="text" id="username" placeholder="Enter Username" oninput="updateGatewaySpecificSetting('username', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="password">Password</label>
                            <input type="password" id="password" placeholder="Enter Password" oninput="updateGatewaySpecificSetting('password', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="customerCode">Customer Code</label>
                            <input type="text" id="customerCode" placeholder="Enter Customer Code" oninput="updateGatewaySpecificSetting('customerCode', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="processor">Processor</label>
                            <select id="processor" onchange="updateGatewaySpecificSetting('processor', this.value); checkAllFieldsFilled();">
                                <option value="">Select processor...</option>
                                <option value="elavon">Elavon</option>
                                <option value="first-data">First Data</option>
                                <option value="fd-rapid-connect">FD Rapid Connect</option>
                                <option value="tsys">TSYS</option>
                                <option value="world-pay">World pay</option>
                                <option value="heartland">Heartland</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Optional Features</label>
                            <div style="margin-top: 15px; display: grid; grid-template-columns: 1fr; gap: 10px;">
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updateMagensaFeature('externalPrinter', this.checked)" style="margin-right: 10px;">
                                    External Printer
                                </label>
                            </div>
                        </div>
                    `,
                    'pos': `
                        <div class="form-group">
                            <label for="username">Username</label>
                            <input type="text" id="username" placeholder="Enter Username" oninput="updateGatewaySpecificSetting('username', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="password">Password</label>
                            <input type="password" id="password" placeholder="Enter Password" oninput="updateGatewaySpecificSetting('password', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="customerCode">Customer Code</label>
                            <input type="text" id="customerCode" placeholder="Enter Customer Code" oninput="updateGatewaySpecificSetting('customerCode', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="processor">Processor</label>
                            <select id="processor" onchange="updateGatewaySpecificSetting('processor', this.value); checkAllFieldsFilled();">
                                <option value="">Select processor...</option>
                                <option value="elavon">Elavon</option>
                                <option value="first-data">First Data</option>
                                <option value="fd-rapid-connect">FD Rapid Connect</option>
                                <option value="tsys">TSYS</option>
                                <option value="world-pay">World pay</option>
                                <option value="heartland">Heartland</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Optional Features</label>
                            <div style="margin-top: 15px; display: grid; grid-template-columns: 1fr; gap: 10px;">
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updateMagensaFeature('externalPrinter', this.checked)" style="margin-right: 10px;">
                                    External Printer
                                </label>
                            </div>
                        </div>
                    `
                },
                'amp': {
                    'lite': `
                        <div class="form-group">
                            <label for="serialNumber">Serial Number</label>
                            <input type="text" id="serialNumber" placeholder="Enter Serial Number" oninput="updateGatewaySpecificSetting('serialNumber', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="password">Password</label>
                            <input type="password" id="password" placeholder="Enter Password" oninput="updateGatewaySpecificSetting('password', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="ccTerminalType">CC Terminal Type</label>
                            <select id="ccTerminalType" onchange="updateGatewaySpecificSetting('ccTerminalType', this.value); checkAllFieldsFilled();">
                                <option value="">Select terminal type...</option>
                                <option value="cloud">Cloud</option>
                                <option value="wlan">Wlan</option>
                                <option value="usb">USB</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Optional Features</label>
                            <div style="margin-top: 15px; display: grid; grid-template-columns: 1fr; gap: 10px;">
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updateAmpFeature('readerPrinter', this.checked)" style="margin-right: 10px;">
                                    Reader Printer
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updateAmpFeature('externalTipDisplay', this.checked)" style="margin-right: 10px;">
                                    External Tip Display
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updateAmpFeature('externalPrinter', this.checked)" style="margin-right: 10px;">
                                    External Printer
                                </label>
                            </div>
                        </div>
                    `,
                    'pos': `
                        <div class="form-group">
                            <label for="serialNumber">Serial Number</label>
                            <input type="text" id="serialNumber" placeholder="Enter Serial Number" oninput="updateGatewaySpecificSetting('serialNumber', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="password">Password</label>
                            <input type="password" id="password" placeholder="Enter Password" oninput="updateGatewaySpecificSetting('password', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="ccTerminalType">CC Terminal Type</label>
                            <select id="ccTerminalType" onchange="updateGatewaySpecificSetting('ccTerminalType', this.value); checkAllFieldsFilled();">
                                <option value="">Select terminal type...</option>
                                <option value="cloud">Cloud</option>
                                <option value="wlan">Wlan</option>
                                <option value="usb">USB</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Optional Features</label>
                            <div style="margin-top: 15px; display: grid; grid-template-columns: 1fr; gap: 10px;">
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updateAmpFeature('readerPrinter', this.checked)" style="margin-right: 10px;">
                                    Reader Printer
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updateAmpFeature('externalTipDisplay', this.checked)" style="margin-right: 10px;">
                                    External Tip Display
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updateAmpFeature('externalPrinter', this.checked)" style="margin-right: 10px;">
                                    External Printer
                                </label>
                            </div>
                        </div>
                    `
                },
                'dejavoo': {
                    'lite': `
                        <div class="form-group">
                            <label>Relationship Type</label>
                            <div style="margin-top: 10px;">
                                <label style="display: flex; align-items: center; cursor: pointer; margin-bottom: 10px;">
                                    <input type="radio" name="dejavooRelationship" value="quantic" onchange="updateGatewaySpecificSetting('relationshipType', this.value); checkAllFieldsFilled();" style="margin-right: 10px;">
                                    Use Quantic Relationship - Refer to Schedule A
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; margin-bottom: 10px;">
                                    <input type="radio" name="dejavooRelationship" value="byom" onchange="updateGatewaySpecificSetting('relationshipType', this.value); checkAllFieldsFilled();" style="margin-right: 10px;">
                                    Bring your own relationship - Monthly Cost - $10/month per MID
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="tpn">TPN</label>
                            <input type="text" id="tpn" placeholder="Enter TPN" oninput="updateGatewaySpecificSetting('tpn', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="authToken">Auth Token</label>
                            <input type="password" id="authToken" placeholder="Enter Auth Token" oninput="updateGatewaySpecificSetting('authToken', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                    `,
                    'pos': `
                        <div class="form-group">
                            <label>Relationship Type</label>
                            <div style="margin-top: 10px;">
                                <label style="display: flex; align-items: center; cursor: pointer; margin-bottom: 10px;">
                                    <input type="radio" name="dejavooRelationship" value="quantic" onchange="updateGatewaySpecificSetting('relationshipType', this.value); checkAllFieldsFilled();" style="margin-right: 10px;">
                                    Use Quantic Relationship - Refer to Schedule A
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; margin-bottom: 10px;">
                                    <input type="radio" name="dejavooRelationship" value="byom" onchange="updateGatewaySpecificSetting('relationshipType', this.value); checkAllFieldsFilled();" style="margin-right: 10px;">
                                    Bring your own relationship - Monthly Cost - $10/month per MID
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="tpn">TPN</label>
                            <input type="text" id="tpn" placeholder="Enter TPN" oninput="updateGatewaySpecificSetting('tpn', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="authToken">Auth Token</label>
                            <input type="password" id="authToken" placeholder="Enter Auth Token" oninput="updateGatewaySpecificSetting('authToken', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="registerId">Register ID</label>
                            <input type="text" id="registerId" placeholder="Enter Register ID" oninput="updateGatewaySpecificSetting('registerId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="authKey">Auth Key</label>
                            <input type="password" id="authKey" placeholder="Enter Auth Key" oninput="updateGatewaySpecificSetting('authKey', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                    `,
                    'card-not-present': `
                        <div class="form-group">
                            <label>Relationship Type</label>
                            <div style="margin-top: 10px;">
                                <label style="display: flex; align-items: center; cursor: pointer; margin-bottom: 10px;">
                                    <input type="radio" name="dejavooRelationship" value="quantic" onchange="updateGatewaySpecificSetting('relationshipType', this.value); checkAllFieldsFilled();" style="margin-right: 10px;">
                                    Use Quantic Relationship - Refer to Schedule A
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; margin-bottom: 10px;">
                                    <input type="radio" name="dejavooRelationship" value="byom" onchange="updateGatewaySpecificSetting('relationshipType', this.value); checkAllFieldsFilled();" style="margin-right: 10px;">
                                    Bring your own relationship - Monthly Cost - $10/month per MID
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="tpn">TPN</label>
                            <input type="text" id="tpn" placeholder="Enter TPN" oninput="updateGatewaySpecificSetting('tpn', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="authToken">Auth Token</label>
                            <input type="password" id="authToken" placeholder="Enter Auth Token" oninput="updateGatewaySpecificSetting('authToken', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="registerId">Register ID</label>
                            <input type="text" id="registerId" placeholder="Enter Register ID" oninput="updateGatewaySpecificSetting('registerId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="authKey">Auth Key</label>
                            <input type="password" id="authKey" placeholder="Enter Auth Key" oninput="updateGatewaySpecificSetting('authKey', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                    `
                },
                'authnet': {
                    'card-not-present': `
                        <div class="form-group">
                            <label for="merchantId">Merchant ID</label>
                            <input type="text" id="merchantId" placeholder="Enter Merchant ID" oninput="updateGatewaySpecificSetting('merchantId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="apiLogin">API Login</label>
                            <input type="text" id="apiLogin" placeholder="Enter API Login" oninput="updateGatewaySpecificSetting('apiLogin', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="transactionKey">Transaction Key</label>
                            <input type="password" id="transactionKey" placeholder="Enter Transaction Key" oninput="updateGatewaySpecificSetting('transactionKey', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="clientKey">Client Key</label>
                            <input type="password" id="clientKey" placeholder="Enter Client Key" oninput="updateGatewaySpecificSetting('clientKey', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                    `
                },
                'tsys-transit': {
                    'card-not-present': `
                        <div class="form-group">
                            <label for="username">Username</label>
                            <input type="text" id="username" placeholder="Enter Username" oninput="updateGatewaySpecificSetting('username', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="password">Password</label>
                            <input type="password" id="password" placeholder="Enter Password" oninput="updateGatewaySpecificSetting('password', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="merchantId">Merchant ID</label>
                            <input type="text" id="merchantId" placeholder="Enter Merchant ID" oninput="updateGatewaySpecificSetting('merchantId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                    `
                },
                'elavon': {
                    'lite': `
                        <div class="form-group">
                            <label for="merchantId">Merchant ID</label>
                            <input type="text" id="merchantId" placeholder="Enter Merchant ID" oninput="updateGatewaySpecificSetting('merchantId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                    `,
                    'pos': `
                        <div class="form-group">
                            <label for="merchantId">Merchant ID</label>
                            <input type="text" id="merchantId" placeholder="Enter Merchant ID" oninput="updateGatewaySpecificSetting('merchantId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                    `,
                    'card-not-present': `
                        <div class="form-group">
                            <label for="merchantId">Merchant ID</label>
                            <input type="text" id="merchantId" placeholder="Enter Merchant ID" oninput="updateGatewaySpecificSetting('merchantId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                    `
                },
                'payroc': {
                    'lite': `
                        <div class="form-group">
                            <label for="serialNumber">Serial Number</label>
                            <input type="text" id="serialNumber" placeholder="Enter Serial Number" oninput="updateGatewaySpecificSetting('serialNumber', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="merchantId">Merchant ID</label>
                            <input type="text" id="merchantId" placeholder="Enter Merchant ID" oninput="updateGatewaySpecificSetting('merchantId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="contactName">Contact Name</label>
                            <input type="text" id="contactName" placeholder="Enter Contact Name" oninput="updateGatewaySpecificSetting('contactName', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone</label>
                            <input type="tel" id="phone" placeholder="Enter Phone Number" oninput="updateGatewaySpecificSetting('phone', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" placeholder="Enter Email Address" oninput="updateGatewaySpecificSetting('email', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="address">Address</label>
                            <input type="text" id="address" placeholder="Enter Street Address" oninput="updateGatewaySpecificSetting('address', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="city">City</label>
                            <input type="text" id="city" placeholder="Enter City" oninput="updateGatewaySpecificSetting('city', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="state">State</label>
                            <input type="text" id="state" placeholder="Enter State" oninput="updateGatewaySpecificSetting('state', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="zipCode">Zip Code</label>
                            <input type="text" id="zipCode" placeholder="Enter Zip Code" oninput="updateGatewaySpecificSetting('zipCode', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                    `,
                    'pos': `
                        <div class="form-group">
                            <label for="serialNumber">Serial Number</label>
                            <input type="text" id="serialNumber" placeholder="Enter Serial Number" oninput="updateGatewaySpecificSetting('serialNumber', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="merchantId">Merchant ID</label>
                            <input type="text" id="merchantId" placeholder="Enter Merchant ID" oninput="updateGatewaySpecificSetting('merchantId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="contactName">Contact Name</label>
                            <input type="text" id="contactName" placeholder="Enter Contact Name" oninput="updateGatewaySpecificSetting('contactName', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone</label>
                            <input type="tel" id="phone" placeholder="Enter Phone Number" oninput="updateGatewaySpecificSetting('phone', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" placeholder="Enter Email Address" oninput="updateGatewaySpecificSetting('email', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="address">Address</label>
                            <input type="text" id="address" placeholder="Enter Street Address" oninput="updateGatewaySpecificSetting('address', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="city">City</label>
                            <input type="text" id="city" placeholder="Enter City" oninput="updateGatewaySpecificSetting('city', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="state">State</label>
                            <input type="text" id="state" placeholder="Enter State" oninput="updateGatewaySpecificSetting('state', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="zipCode">Zip Code</label>
                            <input type="text" id="zipCode" placeholder="Enter Zip Code" oninput="updateGatewaySpecificSetting('zipCode', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                    `,
                    'card-not-present': `
                        <div class="form-group">
                            <label for="username">Username</label>
                            <input type="text" id="username" placeholder="Enter Username" oninput="updateGatewaySpecificSetting('username', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="password">Password</label>
                            <input type="password" id="password" placeholder="Enter Password" oninput="updateGatewaySpecificSetting('password', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="merchantToken">Merchant Token</label>
                            <input type="text" id="merchantToken" placeholder="Enter Merchant Token" oninput="updateGatewaySpecificSetting('merchantToken', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                    `
                },
                'payroc-gateway': {
                    'lite': `
                        <div class="form-group">
                            <label for="serialNumber">Serial Number</label>
                            <input type="text" id="serialNumber" placeholder="Enter Serial Number" oninput="updateGatewaySpecificSetting('serialNumber', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="merchantId">Merchant ID</label>
                            <input type="text" id="merchantId" placeholder="Enter Merchant ID" oninput="updateGatewaySpecificSetting('merchantId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="contactName">Contact Name</label>
                            <input type="text" id="contactName" placeholder="Enter Contact Name" oninput="updateGatewaySpecificSetting('contactName', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone</label>
                            <input type="tel" id="phone" placeholder="Enter Phone Number" oninput="updateGatewaySpecificSetting('phone', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" placeholder="Enter Email Address" oninput="updateGatewaySpecificSetting('email', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="address">Address</label>
                            <input type="text" id="address" placeholder="Enter Street Address" oninput="updateGatewaySpecificSetting('address', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="city">City</label>
                            <input type="text" id="city" placeholder="Enter City" oninput="updateGatewaySpecificSetting('city', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="state">State</label>
                            <input type="text" id="state" placeholder="Enter State" oninput="updateGatewaySpecificSetting('state', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="zipCode">Zip Code</label>
                            <input type="text" id="zipCode" placeholder="Enter Zip Code" oninput="updateGatewaySpecificSetting('zipCode', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                    `,
                    'pos': `
                        <div class="form-group">
                            <label for="serialNumber">Serial Number</label>
                            <input type="text" id="serialNumber" placeholder="Enter Serial Number" oninput="updateGatewaySpecificSetting('serialNumber', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="merchantId">Merchant ID</label>
                            <input type="text" id="merchantId" placeholder="Enter Merchant ID" oninput="updateGatewaySpecificSetting('merchantId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="contactName">Contact Name</label>
                            <input type="text" id="contactName" placeholder="Enter Contact Name" oninput="updateGatewaySpecificSetting('contactName', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone</label>
                            <input type="tel" id="phone" placeholder="Enter Phone Number" oninput="updateGatewaySpecificSetting('phone', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" placeholder="Enter Email Address" oninput="updateGatewaySpecificSetting('email', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="address">Address</label>
                            <input type="text" id="address" placeholder="Enter Street Address" oninput="updateGatewaySpecificSetting('address', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="city">City</label>
                            <input type="text" id="city" placeholder="Enter City" oninput="updateGatewaySpecificSetting('city', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="state">State</label>
                            <input type="text" id="state" placeholder="Enter State" oninput="updateGatewaySpecificSetting('state', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="zipCode">Zip Code</label>
                            <input type="text" id="zipCode" placeholder="Enter Zip Code" oninput="updateGatewaySpecificSetting('zipCode', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                    `,
                    'card-not-present': `
                        <div class="form-group">
                            <label for="serialNumber">Serial Number</label>
                            <input type="text" id="serialNumber" placeholder="Enter Serial Number" oninput="updateGatewaySpecificSetting('serialNumber', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="merchantId">Merchant ID</label>
                            <input type="text" id="merchantId" placeholder="Enter Merchant ID" oninput="updateGatewaySpecificSetting('merchantId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="contactName">Contact Name</label>
                            <input type="text" id="contactName" placeholder="Enter Contact Name" oninput="updateGatewaySpecificSetting('contactName', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone</label>
                            <input type="tel" id="phone" placeholder="Enter Phone Number" oninput="updateGatewaySpecificSetting('phone', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" placeholder="Enter Email Address" oninput="updateGatewaySpecificSetting('email', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="address">Address</label>
                            <input type="text" id="address" placeholder="Enter Street Address" oninput="updateGatewaySpecificSetting('address', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="city">City</label>
                            <input type="text" id="city" placeholder="Enter City" oninput="updateGatewaySpecificSetting('city', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="state">State</label>
                            <input type="text" id="state" placeholder="Enter State" oninput="updateGatewaySpecificSetting('state', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="zipCode">Zip Code</label>
                            <input type="text" id="zipCode" placeholder="Enter Zip Code" oninput="updateGatewaySpecificSetting('zipCode', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                    `
                },
                'payroc-gateway-uat': {
                    'lite': `
                        <div class="form-group">
                            <label for="serialNumber">Serial Number</label>
                            <input type="text" id="serialNumber" placeholder="Enter Serial Number" oninput="updateGatewaySpecificSetting('serialNumber', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="merchantId">Merchant ID</label>
                            <input type="text" id="merchantId" placeholder="Enter Merchant ID" oninput="updateGatewaySpecificSetting('merchantId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="contactName">Contact Name</label>
                            <input type="text" id="contactName" placeholder="Enter Contact Name" oninput="updateGatewaySpecificSetting('contactName', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone</label>
                            <input type="tel" id="phone" placeholder="Enter Phone Number" oninput="updateGatewaySpecificSetting('phone', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" placeholder="Enter Email Address" oninput="updateGatewaySpecificSetting('email', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="address">Address</label>
                            <input type="text" id="address" placeholder="Enter Street Address" oninput="updateGatewaySpecificSetting('address', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="city">City</label>
                            <input type="text" id="city" placeholder="Enter City" oninput="updateGatewaySpecificSetting('city', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="state">State</label>
                            <input type="text" id="state" placeholder="Enter State" oninput="updateGatewaySpecificSetting('state', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="zipCode">Zip Code</label>
                            <input type="text" id="zipCode" placeholder="Enter Zip Code" oninput="updateGatewaySpecificSetting('zipCode', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                    `,
                    'pos': `
                        <div class="form-group">
                            <label for="serialNumber">Serial Number</label>
                            <input type="text" id="serialNumber" placeholder="Enter Serial Number" oninput="updateGatewaySpecificSetting('serialNumber', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="merchantId">Merchant ID</label>
                            <input type="text" id="merchantId" placeholder="Enter Merchant ID" oninput="updateGatewaySpecificSetting('merchantId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="contactName">Contact Name</label>
                            <input type="text" id="contactName" placeholder="Enter Contact Name" oninput="updateGatewaySpecificSetting('contactName', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone</label>
                            <input type="tel" id="phone" placeholder="Enter Phone Number" oninput="updateGatewaySpecificSetting('phone', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" placeholder="Enter Email Address" oninput="updateGatewaySpecificSetting('email', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="address">Address</label>
                            <input type="text" id="address" placeholder="Enter Street Address" oninput="updateGatewaySpecificSetting('address', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="city">City</label>
                            <input type="text" id="city" placeholder="Enter City" oninput="updateGatewaySpecificSetting('city', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="state">State</label>
                            <input type="text" id="state" placeholder="Enter State" oninput="updateGatewaySpecificSetting('state', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="zipCode">Zip Code</label>
                            <input type="text" id="zipCode" placeholder="Enter Zip Code" oninput="updateGatewaySpecificSetting('zipCode', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                    `,
                    'card-not-present': `
                        <div class="form-group">
                            <label for="serialNumber">Serial Number</label>
                            <input type="text" id="serialNumber" placeholder="Enter Serial Number" oninput="updateGatewaySpecificSetting('serialNumber', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="merchantId">Merchant ID</label>
                            <input type="text" id="merchantId" placeholder="Enter Merchant ID" oninput="updateGatewaySpecificSetting('merchantId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="contactName">Contact Name</label>
                            <input type="text" id="contactName" placeholder="Enter Contact Name" oninput="updateGatewaySpecificSetting('contactName', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone</label>
                            <input type="tel" id="phone" placeholder="Enter Phone Number" oninput="updateGatewaySpecificSetting('phone', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" placeholder="Enter Email Address" oninput="updateGatewaySpecificSetting('email', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="address">Address</label>
                            <input type="text" id="address" placeholder="Enter Street Address" oninput="updateGatewaySpecificSetting('address', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="city">City</label>
                            <input type="text" id="city" placeholder="Enter City" oninput="updateGatewaySpecificSetting('city', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="state">State</label>
                            <input type="text" id="state" placeholder="Enter State" oninput="updateGatewaySpecificSetting('state', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="zipCode">Zip Code</label>
                            <input type="text" id="zipCode" placeholder="Enter Zip Code" oninput="updateGatewaySpecificSetting('zipCode', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                    `
                },
                'pax-qst-lite-apio': {
                    'lite': `
                        <div class="form-group">
                            <label for="merchantId">Merchant ID</label>
                            <input type="text" id="merchantId" placeholder="Enter Merchant ID" oninput="updateGatewaySpecificSetting('merchantId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="serialNumber">Serial Number</label>
                            <input type="text" id="serialNumber" placeholder="Enter Serial Number" oninput="updateGatewaySpecificSetting('serialNumber', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label>Terminal Type (Optional)</label>
                            <div style="margin-top: 10px;">
                                <label style="display: flex; align-items: center; cursor: pointer; margin-bottom: 10px;">
                                    <input type="radio" name="paxTerminalType" value="E700" onchange="updateGatewaySpecificSetting('terminalType', this.value)" style="margin-right: 10px;">
                                    E700
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; margin-bottom: 10px;">
                                    <input type="radio" name="paxTerminalType" value="E800" onchange="updateGatewaySpecificSetting('terminalType', this.value)" style="margin-right: 10px;">
                                    E800
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; margin-bottom: 10px;">
                                    <input type="radio" name="paxTerminalType" value="" onchange="updateGatewaySpecificSetting('terminalType', this.value)" style="margin-right: 10px;">
                                    None Selected
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Optional Features</label>
                            <div style="margin-top: 15px; display: grid; grid-template-columns: 1fr; gap: 10px;">
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updatePaxFeature('enableExternalTipDisplay', this.checked)" style="margin-right: 10px;">
                                    Enable External Tip Display
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updatePaxFeature('hideCashAndCardPrompt', this.checked)" style="margin-right: 10px;">
                                    Hide Cash and Card Prompt
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updatePaxFeature('enableReaderTip', this.checked)" style="margin-right: 10px;">
                                    Enable Reader Tip
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updatePaxFeature('enableDebitPin', this.checked)" style="margin-right: 10px;">
                                    Enable Debit Pin
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updatePaxFeature('disableToken', this.checked)" style="margin-right: 10px;">
                                    Disable Token
                                </label>
                            </div>
                        </div>
                    `,
                    'pos': `
                        <div class="form-group">
                            <label for="merchantId">Merchant ID</label>
                            <input type="text" id="merchantId" placeholder="Enter Merchant ID" oninput="updateGatewaySpecificSetting('merchantId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="serialNumber">Serial Number</label>
                            <input type="text" id="serialNumber" placeholder="Enter Serial Number" oninput="updateGatewaySpecificSetting('serialNumber', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label>Terminal Type (Optional)</label>
                            <div style="margin-top: 10px;">
                                <label style="display: flex; align-items: center; cursor: pointer; margin-bottom: 10px;">
                                    <input type="radio" name="paxTerminalType" value="E700" onchange="updateGatewaySpecificSetting('terminalType', this.value)" style="margin-right: 10px;">
                                    E700
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; margin-bottom: 10px;">
                                    <input type="radio" name="paxTerminalType" value="E800" onchange="updateGatewaySpecificSetting('terminalType', this.value)" style="margin-right: 10px;">
                                    E800
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; margin-bottom: 10px;">
                                    <input type="radio" name="paxTerminalType" value="" onchange="updateGatewaySpecificSetting('terminalType', this.value)" style="margin-right: 10px;">
                                    None Selected
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Optional Features</label>
                            <div style="margin-top: 15px; display: grid; grid-template-columns: 1fr; gap: 10px;">
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updatePaxFeature('enableExternalTipDisplay', this.checked)" style="margin-right: 10px;">
                                    Enable External Tip Display
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updatePaxFeature('hideCashAndCardPrompt', this.checked)" style="margin-right: 10px;">
                                    Hide Cash and Card Prompt
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updatePaxFeature('enableReaderTip', this.checked)" style="margin-right: 10px;">
                                    Enable Reader Tip
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updatePaxFeature('enableDebitPin', this.checked)" style="margin-right: 10px;">
                                    Enable Debit Pin
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updatePaxFeature('disableToken', this.checked)" style="margin-right: 10px;">
                                    Disable Token
                                </label>
                            </div>
                        </div>
                    `,
                    'qst': `
                        <div class="form-group">
                            <label for="merchantId">Merchant ID</label>
                            <input type="text" id="merchantId" placeholder="Enter Merchant ID" oninput="updateGatewaySpecificSetting('merchantId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="serialNumber">Serial Number</label>
                            <input type="text" id="serialNumber" placeholder="Enter Serial Number" oninput="updateGatewaySpecificSetting('serialNumber', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label>Optional Features</label>
                            <div style="margin-top: 15px; display: grid; grid-template-columns: 1fr; gap: 10px;">
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updatePaxFeature('enableExternalTipDisplay', this.checked)" style="margin-right: 10px;">
                                    Enable External Tip Display
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updatePaxFeature('hideCashAndCardPrompt', this.checked)" style="margin-right: 10px;">
                                    Hide Cash and Card Prompt
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updatePaxFeature('enableReaderTip', this.checked)" style="margin-right: 10px;">
                                    Enable Reader Tip
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updatePaxFeature('enableDebitPin', this.checked)" style="margin-right: 10px;">
                                    Enable Debit Pin
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updatePaxFeature('disableToken', this.checked)" style="margin-right: 10px;">
                                    Disable Token
                                </label>
                            </div>
                        </div>
                    `,
                    'card-not-present': `
                        <div class="form-group">
                            <label for="merchantId">Merchant ID</label>
                            <input type="text" id="merchantId" placeholder="Enter Merchant ID" oninput="updateGatewaySpecificSetting('merchantId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="serialNumber">Serial Number</label>
                            <input type="text" id="serialNumber" placeholder="Enter Serial Number" oninput="updateGatewaySpecificSetting('serialNumber', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label>Terminal Type (Optional)</label>
                            <div style="margin-top: 10px;">
                                <label style="display: flex; align-items: center; cursor: pointer; margin-bottom: 10px;">
                                    <input type="radio" name="paxTerminalType" value="E700" onchange="updateGatewaySpecificSetting('terminalType', this.value)" style="margin-right: 10px;">
                                    E700
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; margin-bottom: 10px;">
                                    <input type="radio" name="paxTerminalType" value="E800" onchange="updateGatewaySpecificSetting('terminalType', this.value)" style="margin-right: 10px;">
                                    E800
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; margin-bottom: 10px;">
                                    <input type="radio" name="paxTerminalType" value="" onchange="updateGatewaySpecificSetting('terminalType', this.value)" style="margin-right: 10px;">
                                    None Selected
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Optional Features</label>
                            <div style="margin-top: 15px; display: grid; grid-template-columns: 1fr; gap: 10px;">
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updatePaxFeature('enableExternalTipDisplay', this.checked)" style="margin-right: 10px;">
                                    Enable External Tip Display
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updatePaxFeature('hideCashAndCardPrompt', this.checked)" style="margin-right: 10px;">
                                    Hide Cash and Card Prompt
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updatePaxFeature('enableReaderTip', this.checked)" style="margin-right: 10px;">
                                    Enable Reader Tip
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updatePaxFeature('enableDebitPin', this.checked)" style="margin-right: 10px;">
                                    Enable Debit Pin
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updatePaxFeature('disableToken', this.checked)" style="margin-right: 10px;">
                                    Disable Token
                                </label>
                            </div>
                        </div>
                    `
                },
                'pax-direct-pos': {
                    'lite': `
                        <div class="form-group">
                            <label for="merchantId">Merchant ID</label>
                            <input type="text" id="merchantId" placeholder="Enter Merchant ID" oninput="updateGatewaySpecificSetting('merchantId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="serialNumber">Serial Number</label>
                            <input type="text" id="serialNumber" placeholder="Enter Serial Number" oninput="updateGatewaySpecificSetting('serialNumber', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="terminalIp">Terminal IP</label>
                            <input type="text" id="terminalIp" placeholder="Enter Terminal IP Address" oninput="updateGatewaySpecificSetting('terminalIp', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="terminalModel">Terminal Model</label>
                            <input type="text" id="terminalModel" placeholder="Enter Terminal Model" oninput="updateGatewaySpecificSetting('terminalModel', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label>Optional Features</label>
                            <div style="margin-top: 15px; display: grid; grid-template-columns: 1fr; gap: 10px;">
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updatePaxDirectFeature('externalTipDisplay', this.checked)" style="margin-right: 10px;">
                                    External Tip Display
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updatePaxDirectFeature('enableDebitPin', this.checked)" style="margin-right: 10px;">
                                    Enable Debit Pin
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updatePaxDirectFeature('autoBatching', this.checked)" style="margin-right: 10px;">
                                    Auto Batching
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updatePaxDirectFeature('disableToken', this.checked)" style="margin-right: 10px;">
                                    Disable Token
                                </label>
                            </div>
                        </div>
                    `,
                    'pos': `
                        <div class="form-group">
                            <label for="merchantId">Merchant ID</label>
                            <input type="text" id="merchantId" placeholder="Enter Merchant ID" oninput="updateGatewaySpecificSetting('merchantId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="serialNumber">Serial Number</label>
                            <input type="text" id="serialNumber" placeholder="Enter Serial Number" oninput="updateGatewaySpecificSetting('serialNumber', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="terminalIp">Terminal IP</label>
                            <input type="text" id="terminalIp" placeholder="Enter Terminal IP Address" oninput="updateGatewaySpecificSetting('terminalIp', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="terminalModel">Terminal Model</label>
                            <input type="text" id="terminalModel" placeholder="Enter Terminal Model" oninput="updateGatewaySpecificSetting('terminalModel', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label>Optional Features</label>
                            <div style="margin-top: 15px; display: grid; grid-template-columns: 1fr; gap: 10px;">
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updatePaxDirectFeature('externalTipDisplay', this.checked)" style="margin-right: 10px;">
                                    External Tip Display
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updatePaxDirectFeature('enableDebitPin', this.checked)" style="margin-right: 10px;">
                                    Enable Debit Pin
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updatePaxDirectFeature('autoBatching', this.checked)" style="margin-right: 10px;">
                                    Auto Batching
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updatePaxDirectFeature('disableToken', this.checked)" style="margin-right: 10px;">
                                    Disable Token
                                </label>
                            </div>
                        </div>
                    `,
                    'card-not-present': `
                        <div class="form-group">
                            <label for="merchantId">Merchant ID</label>
                            <input type="text" id="merchantId" placeholder="Enter Merchant ID" oninput="updateGatewaySpecificSetting('merchantId', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="serialNumber">Serial Number</label>
                            <input type="text" id="serialNumber" placeholder="Enter Serial Number" oninput="updateGatewaySpecificSetting('serialNumber', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="terminalIp">Terminal IP</label>
                            <input type="text" id="terminalIp" placeholder="Enter Terminal IP Address" oninput="updateGatewaySpecificSetting('terminalIp', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label for="terminalModel">Terminal Model</label>
                            <input type="text" id="terminalModel" placeholder="Enter Terminal Model" oninput="updateGatewaySpecificSetting('terminalModel', this.value)" onchange="checkAllFieldsFilled()">
                        </div>
                        <div class="form-group">
                            <label>Optional Features</label>
                            <div style="margin-top: 15px; display: grid; grid-template-columns: 1fr; gap: 10px;">
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updatePaxDirectFeature('externalTipDisplay', this.checked)" style="margin-right: 10px;">
                                    External Tip Display
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updatePaxDirectFeature('enableDebitPin', this.checked)" style="margin-right: 10px;">
                                    Enable Debit Pin
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updatePaxDirectFeature('autoBatching', this.checked)" style="margin-right: 10px;">
                                    Auto Batching
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                                    <input type="checkbox" onchange="updatePaxDirectFeature('disableToken', this.checked)" style="margin-right: 10px;">
                                    Disable Token
                                </label>
                            </div>
                        </div>
                    `
                }
            };

            return gatewayConfigs[gateway] ? gatewayConfigs[gateway][appType] : null;
        }

        function updateGatewaySpecificSetting(key, value) {
            if (!config.gatewaySettings.specific) {
                config.gatewaySettings.specific = {};
            }
            config.gatewaySettings.specific[key] = value;
        }

        function updatePaxFeature(feature, checked) {
            if (!config.gatewaySettings.specific) {
                config.gatewaySettings.specific = {};
            }
            if (!config.gatewaySettings.specific.features) {
                config.gatewaySettings.specific.features = {};
            }
            config.gatewaySettings.specific.features[feature] = checked;
        }

        function updatePaxDirectFeature(feature, checked) {
            if (!config.gatewaySettings.specific) {
                config.gatewaySettings.specific = {};
            }
            if (!config.gatewaySettings.specific.paxDirectFeatures) {
                config.gatewaySettings.specific.paxDirectFeatures = {};
            }
            config.gatewaySettings.specific.paxDirectFeatures[feature] = checked;
        }

        function updateAmpFeature(feature, checked) {
            if (!config.gatewaySettings.specific) {
                config.gatewaySettings.specific = {};
            }
            if (!config.gatewaySettings.specific.ampFeatures) {
                config.gatewaySettings.specific.ampFeatures = {};
            }
            config.gatewaySettings.specific.ampFeatures[feature] = checked;
        }

        function updateMagensaFeature(feature, checked) {
            if (!config.gatewaySettings.specific) {
                config.gatewaySettings.specific = {};
            }
            if (!config.gatewaySettings.specific.magensaFeatures) {
                config.gatewaySettings.specific.magensaFeatures = {};
            }
            config.gatewaySettings.specific.magensaFeatures[feature] = checked;
        }

        function updateQuestFeature(feature, checked) {
            if (!config.gatewaySettings.specific) {
                config.gatewaySettings.specific = {};
            }
            if (!config.gatewaySettings.specific.questFeatures) {
                config.gatewaySettings.specific.questFeatures = {};
            }
            config.gatewaySettings.specific.questFeatures[feature] = checked;
        }

        function checkAllFieldsFilled() {
            const gateway = config.paymentGateway;
            const appType = config.appType;
            
            let requiredFields = [];
            
            if (gateway === 'cardconnect' && appType === 'pos') {
                requiredFields = ['manufacturer', 'model', 'username', 'password', 'serialNumbers', 'merchantId', 'url'];
            } else if (gateway === 'cardconnect' && appType === 'card-not-present') {
                requiredFields = ['username', 'merchantId', 'password', 'url'];
            } else if (gateway === 'dejavoo') {
                // Special handling for Dejavoo - check relationship type first
                const relationshipChecked = document.querySelector('input[name="dejavooRelationship"]:checked');
                if (!relationshipChecked) {
                    return; // Don't proceed if no relationship type is selected
                }
                
                // Check other required fields based on app type
                if (appType === 'lite') {
                    requiredFields = ['tpn', 'authToken'];
                } else if (appType === 'pos') {
                    requiredFields = ['tpn', 'authToken', 'registerId', 'authKey'];
                } else if (appType === 'card-not-present') {
                    requiredFields = ['tpn', 'authToken', 'registerId', 'authKey'];
                }
            } else if (gateway === 'authnet' && appType === 'card-not-present') {
                requiredFields = ['merchantId', 'apiLogin', 'transactionKey', 'clientKey'];
            } else if (gateway === 'tsys-transit' && appType === 'card-not-present') {
                requiredFields = ['username', 'password', 'merchantId'];
            } else if (gateway === 'quest' && appType === 'card-not-present') {
                requiredFields = ['publicKey', 'secretKey'];
            } else if (gateway === 'quest' && (appType === 'lite' || appType === 'pos')) {
                requiredFields = ['serialNumber', 'clientKey'];
            } else if (gateway === 'elavon') {
                requiredFields = ['merchantId'];
            } else if (gateway === 'payroc' && appType === 'card-not-present') {
                requiredFields = ['username', 'password', 'merchantToken'];
            } else if (gateway === 'payroc' || gateway === 'payroc-gateway' || gateway === 'payroc-gateway-uat') {
                requiredFields = ['serialNumber', 'merchantId', 'contactName', 'phone', 'email', 'address', 'city', 'state', 'zipCode'];
            } else if (gateway === 'pax-qst-lite-apio') {
                requiredFields = ['merchantId', 'serialNumber'];
            } else if (gateway === 'pax-direct-pos') {
                requiredFields = ['merchantId', 'serialNumber', 'terminalIp', 'terminalModel'];
            } else if (gateway === 'amp') {
                requiredFields = ['serialNumber', 'password', 'ccTerminalType'];
            } else if (gateway === 'magensa') {
                requiredFields = ['username', 'password', 'customerCode', 'processor'];
            } else if (gateway === 'dx8000' || gateway === 'dx8000-uat') {
                requiredFields = ['apiKey', 'terminalId', 'serialNumber'];
            } else if (gateway === 'bbpos' || gateway === 'bbpos-uat') {
                requiredFields = ['terminalId'];
            } else if (gateway === 'pax-uk-pa') {
                requiredFields = ['serialNumber'];
            } else if (gateway === 'paidyet') {
                requiredFields = ['serialNumber', 'merchantId', 'secretKey'];
            }
            
            // Check if all required fields are filled
            const allFilled = requiredFields.every(field => {
                const element = document.getElementById(field);
                return element && element.value.trim() !== '';
            });
            
            if (allFilled) {
                // Show standard gateway config after a short delay
                setTimeout(() => {
                    showStandardGatewayConfig();
                    document.getElementById('step5').classList.remove('hidden');
                }, 500);
            }
        }

        function showStandardGatewayConfig() {
            const configDiv = document.getElementById('gatewayConfig');
            
            // Standard configuration fields that all gateways have
            const configHTML = `
                <div class="form-group">
                    <label for="requestTimeout">Request Timeout (seconds)</label>
                    <input type="number" id="requestTimeout" placeholder="30" min="1" max="300" oninput="updateGatewaySetting('requestTimeout', this.value)">
                </div>
                <div class="form-group">
                    <label for="program">Program</label>
                    <select id="program" onchange="updateGatewaySetting('program', this.value)">
                        <option value="">Select program type...</option>
                        <option value="cash-discounting">Cash Discounting</option>
                        <option value="cash-discounting-quest">Cash Discounting (Quest)</option>
                        <option value="consumer-choice">Consumer Choice</option>
                        <option value="consumer-choice-quest">Consumer Choice (Quest)</option>
                        <option value="non-cash-adjustment">Non Cash Adjustment</option>
                        <option value="non-cash-adjustment-quest">Non Cash Adjustment (Quest)</option>
                        <option value="no-program">No Program</option>
                        <option value="surcharging-quest">Surcharging (Quest)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="label">Label</label>
                    <input type="text" id="label" placeholder="Enter label" oninput="updateGatewaySetting('label', this.value)">
                </div>
                <div class="form-group">
                    <label for="value">Value</label>
                    <input type="text" id="value" placeholder="Enter value" oninput="updateGatewaySetting('value', this.value)">
                </div>
                <div class="form-group">
                    <label for="valueType">Value Type</label>
                    <select id="valueType" onchange="updateGatewaySetting('valueType', this.value)">
                        <option value="">Select value type...</option>
                        <option value="percentage">Percentage</option>
                        <option value="amount">Amount</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="preAuthTabAmount">Pre Auth Tab Amount</label>
                    <input type="number" id="preAuthTabAmount" placeholder="0.00" min="0" step="0.01" oninput="updateGatewaySetting('preAuthTabAmount', this.value)">
                </div>
                <div class="form-group">
                    <label for="tipPrompt">Tip Prompt</label>
                    <div class="toggle-container">
                        <span class="toggle-label">Off</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="tipPromptToggle" onchange="updateGatewaySetting('tipPrompt', this.checked ? 'on' : 'off'); toggleSurchargeOption(this.checked ? 'on' : 'off')">
                            <span class="toggle-slider"></span>
                        </label>
                        <span class="toggle-label">On</span>
                    </div>
                </div>
                <div class="form-group" id="surchargeOnTipGroup" style="display: none;">
                    <label for="disableSurchargeOnTip">Disable Surcharge on Tip Prompt</label>
                    <div class="toggle-container">
                        <span class="toggle-label">Off</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="disableSurchargeToggle" onchange="updateGatewaySetting('disableSurchargeOnTip', this.checked ? 'on' : 'off')">
                            <span class="toggle-slider"></span>
                        </label>
                        <span class="toggle-label">On</span>
                    </div>
                </div>
                <div class="form-group">
                    <label for="enableTipAdjustment">Enable Tip Adjustment</label>
                    <div class="toggle-container">
                        <span class="toggle-label">Off</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="enableTipAdjustmentToggle" onchange="updateGatewaySetting('enableTipAdjustment', this.checked ? 'on' : 'off')">
                            <span class="toggle-slider"></span>
                        </label>
                        <span class="toggle-label">On</span>
                    </div>
                </div>
            `;

            configDiv.innerHTML = configHTML;
            
            setTimeout(() => {
                showFeatureConfig();
                document.getElementById('step6').classList.remove('hidden');
            }, 500);
        }

        function updateGatewaySetting(key, value) {
            config.gatewaySettings[key] = value;
        }

        function toggleSurchargeOption(tipPromptValue) {
            const surchargeGroup = document.getElementById('surchargeOnTipGroup');
            const disableSurchargeToggle = document.getElementById('disableSurchargeToggle');
            
            if (surchargeGroup) {
                if (tipPromptValue === 'on') {
                    surchargeGroup.style.display = 'block';
                } else {
                    surchargeGroup.style.display = 'none';
                    // Reset the surcharge setting when hiding
                    config.gatewaySettings.disableSurchargeOnTip = '';
                    // Clear the toggle switch
                    if (disableSurchargeToggle) {
                        disableSurchargeToggle.checked = false;
                    }
                }
            }
        }

        function showFeatureConfig() {
            setTimeout(() => {
                document.getElementById('step6').classList.remove('hidden');
            }, 500);
        }

        function updatePreview() {
            config.stationName = document.getElementById('stationName').value;
            config.location = document.getElementById('location').value;

            const previewContent = document.getElementById('previewContent');
            let deviceDisplay = config.device;
            
            // Show appropriate device info for different gateway types
            if (config.appType === 'card-not-present') {
                deviceDisplay = 'Card Not Present (No Physical Device)';
            } else if (config.paymentGateway === 'dx8000') {
                deviceDisplay = 'DX8000 (Integrated Device)';
            } else if (config.paymentGateway === 'dx8000-uat') {
                deviceDisplay = 'DX8000 UAT (Integrated Device)';
            } else if (config.paymentGateway === 'bbpos') {
                deviceDisplay = 'BBPOS (Integrated Device)';
            } else if (config.paymentGateway === 'bbpos-uat') {
                deviceDisplay = 'BBPOS UAT (Integrated Device)';
            }
            
            previewContent.innerHTML = `
                <div class="preview-item">
                    <span>App Type:</span>
                    <span>${config.appType.replace('-', ' ').toUpperCase()}</span>
                </div>
                <div class="preview-item">
                    <span>Payment Gateway:</span>
                    <span>${getGatewayDisplayName(config.paymentGateway)}</span>
                </div>
                <div class="preview-item">
                    <span>Device:</span>
                    <span>${deviceDisplay || 'Not selected'}</span>
                </div>
                <div class="preview-item">
                    <span>Station Name:</span>
                    <span>${config.stationName || 'Not set'}</span>
                </div>
                <div class="preview-item">
                    <span>Location:</span>
                    <span>${config.location || 'Not set'}</span>
                </div>
            `;
        }

        function createStation() {
            if (!config.stationName) {
                alert('Please enter a station name');
                return;
            }

            alert(`Station "${config.stationName}" created successfully!\n\nConfiguration:\n${JSON.stringify(config, null, 2)}`);
        }
    </script>
</body>
</html>
